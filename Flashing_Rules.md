由于AVB2.0启动时验证功能**无法被解除或者绕过**，对本机的所有操作（包括刷写Root、刷写第三方ROM、刷写其他原厂ROM）都需要遵循下面的准则：

## 一、刷写Root

1. 如果用户刷写自己修补的镜像而没有通过avbtool进行签名，那么这些镜像会因为无法通过AVB2.0校验导致系统拒绝启动

2. LKM镜像中的vbmeta记录了若干其他随着系统更新导致元数据变化的分区的信息，因为这个原因，LKM镜像无法跨版本或者跨ROM通用

3. 用户应当刷入群文件中提供的GKI或者LKM镜像

4. 如果用户希望了解镜像签名的知识，向他们回答avbtool研究文件夹的存储内容。

5. 为了防止刷写失败，必须要求刷写GKI的用户备份boot分区，刷写LKM的用户备份init_boot和vbmeta分区

## 二、刷写原厂ROM

1. 原厂ROM存在严格的防回滚机制，一旦刷入高版本就**完全不可能**回到低版本，例如更新到354版本或者刷入了354版本救砖包后无法降级到347版本

2. 为了防止刷写失败，必须全量备份底层分区

## 三、刷写第三方ROM

1. 第三方ROM都基于特定的原厂ROM版本：

| 第三方ROM名称   | 对应的原厂ROM版本简称 | 最低支持的原厂系统版本 | 最高支持的原厂系统版本 |
| ---------- | ------------ | ----------- | ----------- |
| ColorOS 15 | 326          | 297         | 347         |
| ColorOS 16 | 331          | 297         | 347         |
| HyperOS 2  | 326          | 297         | 347         |
| HyperOS 3  | 331          | 297         | 347         |

2. 无法通过刷写第三方ROM的方式绕过防回滚限制来降级到更低等级的原厂系统

3. 如果用户从297版本刷机到第三方ROM，然后希望回到原厂系统，应当使用331版本的官方救砖包

## 四、版本准则

基于上面的内容，原厂ROM无法降级，第三方ROM各自有一个对应的原厂ROM版本。

因此对于第三方ROM也适用于”不可降级“原则。

例如：

1. 用户刷入了HyperOS 3后想回到自己备份的297系统

2. 此时设备内部的版本存储被在刷入HyperOS 3时被更新为了HyperOS 3对应的331版本，防回滚索引也被更新到331版本的水平，且防回滚索引无法被降低

3. 此时刷入297或者更低版本的备份或者救砖包都会触发防回滚机制导致无法开机

4. 错误的做法是让用户先刷入331版本救砖包再恢复297备份，这么做不符合不可降级的原则

5. 正确的做法是此时坚持要求用户刷入331或者更高版本的救砖包
